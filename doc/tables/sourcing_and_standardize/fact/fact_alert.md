## ðŸ“œ Table: Alert_Fact

This fact table captures triggered AML alerts based on rule violations or detection logic. Each alert is linked to a specific customer, account, or transaction context, and includes the triggered rule, severity, and current alert status. Records are upserted as alert status evolves.

- **Type**: Fact  
- **CDC Type**: `1.3`  
- **Writer Type**: `factUpsert`  
- **Primary Key**: `Alert_ID` (from source)  
- **Partitioned By**: `ds_partition_date` (string)  
- **Snapshot Strategy**: Not applicable â€“ fact upsert logic applies

---

### ðŸ“Š Key Columns (Standardize)

| Raw/Alert_Fact | Raw Type  | PK  | Standardized/Alert_Fact | Standardized Type | Description                                                  | Value of Technical Field         | Note                            |
|----------------|-----------|-----|---------------------------|--------------------|--------------------------------------------------------------|----------------------------------|---------------------------------|
| `Alert_ID`     | STRING    | âœ…  | `Alert_ID`               | STRING             | Unique identifier for the alert                              |                                  | Natural key from detection engine |
| `Customer_ID`  | STRING    |     | `Customer_ID`            | STRING             | Customer associated with the alert                           |                                  | FK to `Dim_Customer`             |
| `Rule_ID`      | STRING    |     | `Rule_ID`                | STRING             | The rule that triggered the alert                            |                                  | FK to `Dim_Compliance_Rule_Snapshot` |
| `Entity_Type`  | STRING    |     | `Entity_Type`            | STRING             | Type of object flagged (e.g., customer, account, txn)        |                                  | ENUM or controlled list         |
| `Entity_ID`    | STRING    |     | `Entity_ID`              | STRING             | ID of the flagged object                                     |                                  | Dynamic FK (depends on Entity_Type) |
| `Alert_Status` | STRING    |     | `Alert_Status`           | STRING             | Current status: Open, Investigating, Closed, etc.            |                                  | Mutable field                   |
| `Alert_Level`  | STRING    |     | `Alert_Level`            | STRING             | Severity: Low, Medium, High                                  |                                  | Can be derived from rule        |
| `Alert_Date`   | DATE      |     | `Alert_Date`             | DATE               | Business date when the alert was generated                   |                                  | Used for partition or filtering |
| `created_at`   | TIMESTAMP |     | `created_at`             | TIMESTAMP          | When alert was first created                                 | From source                      |                                 |
| `updated_at`   | TIMESTAMP |     | `updated_at`             | TIMESTAMP          | When alert was last modified                                 | From source                      |                                 |
| **Technical Fields** |     |     |                           |                    |                                                              |                                  |                                 |
|                |           |     | `ds_key`                 | STRING             | Surrogate primary key in standardized zone                   | `Alert_ID`                       | Required for upsert             |
|                |           |     | `cdc_index`              | INT                | 1 = current, 0 = outdated                                    | `1` or `0`                       | Tracks latest alert version     |
|                |           |     | `cdc_change_type`        | STRING             | CDC operation type                                           | `'cdc_insert'`, `'cdc_update'`  | From source CDC or logic        |
|                |           |     | `scd_change_timestamp`   | TIMESTAMP          | When this version of the alert was processed                 | `updated_at` or job time         | Used for audit trail            |
|                |           |     | `ds_partition_date`      | STRING             | Partition column (`yyyy-MM-dd`)                              | From `Alert_Date` or job date    | Required for storage             |

---

### âœ… Business Use Cases

- Track alerts generated by AML rule engine  
- Monitor alert lifecycle from trigger to resolution  
- Enable analyst dashboards and workload queues  
- Drive downstream escalation, SAR filing, and case management workflows  